{% extends 'navbar.html' %}
{% load static %}
{% block title %}Products List{% endblock %}
{% block link %}
<link rel="stylesheet" href="{% static 'css/product.css' %}">
<style>
    /* âœ… Make images uniform */
    .product-img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 5px;
    }
    /* âœ… Mobile adjustments */
    @media (max-width: 768px) {
        .search-input {
            width: 100% !important;
            margin-bottom: 10px;
        }
        .search-div button {
            width: 100% !important;
            margin-left: 0 !important;
        }
        .add-product .button {
            text-align: center;
            float: none !important;
            padding-top: 0;
        }
        .add-product .row {
            flex-direction: column;
        }
        .add-product .col-lg-6 {
            width: 100%;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="col-lg-10 col-md-9 col-sm-12 page-col">
    <div class="d-flex flex-wrap justify-content-between align-items-center p-4">
        <h2 class="fw-bold mb-3 mb-md-0">ðŸ“¦ Products List</h2>
        <a href="{% url 'add_product' %}" class="btn text-white" style="background-color: #345578; border-radius: 8px; padding: 8px 16px; font-size: 14px;">âž• Add Product</a>
    </div>

    <div class="search-div px-4">
        <form action="{% url 'products_list' %}" method="get" class="d-flex flex-wrap gap-2 ">
            {% csrf_token %}
            <input type="text" id="product-search" class="form-control search-input" style="width: 30%;height: 43px;font-size: 14px;" name="search" placeholder="ðŸ” Search product..." autocomplete="off">
            <button type="submit" class="btn btn-primary text-white" style="background-color: #1d4876; border:none;">Search</button>
        </form>
    </div>

    {% if products %}
    <div class="table-div mt-4 px-4">
        <div class="table-responsive">
            <table class="table table-hover table-bordered align-middle">
                <thead class="table-light">
                    <tr>
                        <th>#</th>
                        <th>ID</th>
                        <th>Image</th>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Category</th>
                        <th>Stock</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in products %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ product.product_id }}</td>
                        <td>
                            {% if product.image %}
                                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-img">
                            {% else %}
                                No image
                            {% endif %}
                        </td>
                        <td>{{ product.name }}</td>
                        <td>â‚¹{{ product.price }}</td>
                        <td>{{ product.category }}</td>
                        <td>
                            {% if product.stock <= 0 %}
                                <span class="text-danger">Out of Stock</span>
                            {% else %}
                                {{ product.stock }}
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'product_view' product.id %}" class="btn btn-success btn-sm" style="background-color: #1d4876;">View</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    <div class="p-4 text-center">
        <h4 class="text-muted">ðŸš« No Product found!</h4>
    </div>
    {% endif %}
</div>
{% endblock %}
